<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Assignments - UI-11</title>
  <style>
    :root {
      --color-primary: #1a5f6c;
      --color-primary-light: #e8f4f6;
      --color-text: #2d3748;
      --color-text-muted: #64748b;
      --color-border: #e2e8f0;
      --color-bg: #f8fafc;
      --color-white: #ffffff;
      --color-warning-bg: #fffbeb;
      --color-warning-border: #f59e0b;
      --color-warning-text: #92400e;
      --color-success-bg: #ecfdf5;
      --color-success-border: #10b981;
      --color-success-text: #065f46;
      --color-danger-bg: #fef2f2;
      --color-danger-border: #ef4444;
      --color-danger-text: #991b1b;
      --color-info-bg: #eff6ff;
      --color-info-border: #3b82f6;
      --color-info-text: #1e40af;
      --color-zebra: #f8fafc;
      --font-mono: 'SF Mono', 'Cascadia Code', 'Fira Code', Consolas, monospace;
      --radius-sm: 4px;
      --radius-md: 8px;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background-color: var(--color-bg);
      padding: 0.75rem;
      min-height: 100vh;
      color: var(--color-text);
      line-height: 1.5;
    }

    @media (min-width: 640px) {
      body { padding: 1.5rem; }
    }

    .container {
      max-width: 860px;
      margin: 0 auto;
      width: 100%;
    }

    /* Page Header */
    .page-header {
      background: linear-gradient(135deg, #1a5f6c 0%, #2d8797 100%);
      color: var(--color-white);
      padding: 1rem 1.25rem;
      border-radius: var(--radius-md) var(--radius-md) 0 0;
      display: flex;
      align-items: center;
      gap: 0.625rem;
    }

    .page-header svg {
      width: 1.25rem;
      height: 1.25rem;
      opacity: 0.9;
    }

    .page-header h1 {
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: -0.01em;
    }

    @media (min-width: 640px) {
      .page-header {
        padding: 1.25rem 1.5rem;
      }
      .page-header h1 { font-size: 1.125rem; }
      .page-header svg { width: 1.375rem; height: 1.375rem; }
    }

    /* Main Content Card */
    .content-card {
      background: var(--color-white);
      border-radius: 0 0 var(--radius-md) var(--radius-md);
      box-shadow: var(--shadow-md);
      padding: 1.25rem;
    }

    @media (min-width: 640px) {
      .content-card { padding: 1.5rem; }
    }

    /* Placeholder / No-data state */
    .placeholder {
      background-color: var(--color-bg);
      border: 1px dashed var(--color-border);
      border-radius: var(--radius-md);
      padding: 2.5rem 1.5rem;
      text-align: center;
    }

    .placeholder-icon {
      width: 2.5rem;
      height: 2.5rem;
      margin: 0 auto 1rem;
      color: var(--color-text-muted);
      opacity: 0.6;
    }

    .placeholder-text {
      color: var(--color-text-muted);
      font-size: 0.9375rem;
    }

    .placeholder-text code {
      background: var(--color-white);
      border: 1px solid var(--color-border);
      padding: 0.125rem 0.375rem;
      border-radius: var(--radius-sm);
      font-family: var(--font-mono);
      font-size: 0.8125rem;
      color: var(--color-primary);
    }

    /* Error State */
    .error-state {
      background-color: var(--color-danger-bg);
      border: 1px solid var(--color-danger-border);
      border-radius: var(--radius-md);
      padding: 1.5rem;
      text-align: center;
    }

    .error-state-icon {
      width: 2.5rem;
      height: 2.5rem;
      margin: 0 auto 0.75rem;
      color: var(--color-danger-border);
    }

    .error-state-title {
      font-weight: 600;
      color: var(--color-danger-text);
      font-size: 1rem;
    }

    /* Order Header Info */
    .order-header {
      background: var(--color-primary-light);
      border: 1px solid var(--color-primary);
      border-radius: var(--radius-md);
      padding: 1rem 1.25rem;
      margin-bottom: 1.25rem;
    }

    .order-header-title {
      font-size: 0.6875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-primary);
      font-weight: 600;
      margin-bottom: 0.75rem;
    }

    .order-header-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.75rem 1.5rem;
    }

    .order-header-item {
      display: flex;
      flex-direction: column;
      gap: 0.125rem;
    }

    .order-header-label {
      font-size: 0.6875rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--color-text-muted);
      font-weight: 500;
    }

    .order-header-value {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--color-text);
    }

    .order-header-value.mono {
      font-family: var(--font-mono);
      font-size: 0.8125rem;
    }

    /* Status Badge */
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.5rem;
      border-radius: var(--radius-sm);
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }

    .status-dispatched {
      background-color: var(--color-info-bg);
      color: var(--color-info-text);
      border: 1px solid var(--color-info-border);
    }

    .status-on_assignment {
      background-color: var(--color-warning-bg);
      color: var(--color-warning-text);
      border: 1px solid var(--color-warning-border);
    }

    .status-completed {
      background-color: var(--color-success-bg);
      color: var(--color-success-text);
      border: 1px solid var(--color-success-border);
    }

    .status-default {
      background-color: var(--color-bg);
      color: var(--color-text-muted);
      border: 1px solid var(--color-border);
    }

    /* Order Status Badge */
    .order-status-draft {
      background-color: var(--color-bg);
      color: var(--color-text-muted);
      border: 1px solid var(--color-border);
    }

    .order-status-needs_to_be_filled {
      background-color: var(--color-warning-bg);
      color: var(--color-warning-text);
      border: 1px solid var(--color-warning-border);
    }

    .order-status-filled {
      background-color: var(--color-info-bg);
      color: var(--color-info-text);
      border: 1px solid var(--color-info-border);
    }

    .order-status-completed {
      background-color: var(--color-success-bg);
      color: var(--color-success-text);
      border: 1px solid var(--color-success-border);
    }

    .order-status-cancelled {
      background-color: var(--color-danger-bg);
      color: var(--color-danger-text);
      border: 1px solid var(--color-danger-border);
    }

    /* Section Title */
    .section-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-muted);
      font-weight: 600;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-title-count {
      background: var(--color-primary);
      color: var(--color-white);
      font-size: 0.625rem;
      padding: 0.125rem 0.375rem;
      border-radius: 9999px;
      font-weight: 600;
    }

    /* Assignments Table */
    .table-wrapper {
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      overflow: hidden;
    }

    .assignments-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    .assignments-table th {
      background-color: var(--color-bg);
      font-weight: 600;
      color: var(--color-text-muted);
      font-size: 0.6875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 0.625rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--color-border);
    }

    .assignments-table th:last-child {
      text-align: center;
    }

    .assignments-table td {
      padding: 0.625rem 1rem;
      color: var(--color-text);
      border-bottom: 1px solid var(--color-border);
    }

    .assignments-table tbody tr:nth-child(even) {
      background-color: var(--color-zebra);
    }

    .assignments-table tbody tr:last-child td {
      border-bottom: none;
    }

    .assignments-table td.id-cell {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--color-text-muted);
      max-width: 120px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .assignments-table td.employee-cell {
      font-family: var(--font-mono);
      font-size: 0.8125rem;
    }

    .assignments-table td.date-cell {
      font-family: var(--font-mono);
      font-size: 0.8125rem;
      white-space: nowrap;
    }

    .assignments-table td.status-cell {
      text-align: center;
    }

    /* Empty State */
    .empty-state {
      background-color: var(--color-warning-bg);
      border: 1px solid var(--color-warning-border);
      border-radius: var(--radius-md);
      padding: 1.5rem;
      text-align: center;
    }

    .empty-state-icon {
      width: 2rem;
      height: 2rem;
      margin: 0 auto 0.625rem;
      color: var(--color-warning-border);
    }

    .empty-state-title {
      font-weight: 600;
      color: var(--color-warning-text);
      font-size: 0.9375rem;
    }

    .empty-state-hint {
      font-size: 0.8125rem;
      color: var(--color-warning-text);
      opacity: 0.85;
      margin-top: 0.25rem;
    }

    /* Responsive table */
    @media (max-width: 600px) {
      .assignments-table td.id-cell {
        max-width: 80px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="page-header">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
      </svg>
      <h1>Order Assignments</h1>
    </header>

    <div class="content-card">
      <div class="placeholder" id="placeholder">
        <svg class="placeholder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <line x1="12" y1="16" x2="12" y2="12"/>
          <line x1="12" y1="8" x2="12.01" y2="8"/>
        </svg>
        <p class="placeholder-text">
          Provide <code>orderId</code> query parameter to view order assignments.
        </p>
      </div>

      <div class="error-state" id="errorState" style="display: none;">
        <svg class="error-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <line x1="15" y1="9" x2="9" y2="15"/>
          <line x1="9" y1="9" x2="15" y2="15"/>
        </svg>
        <div class="error-state-title" id="errorMessage">Order not found</div>
      </div>

      <div id="content" style="display: none;">
        <!-- Order Header -->
        <div class="order-header">
          <div class="order-header-title">Order Details</div>
          <div class="order-header-grid">
            <div class="order-header-item">
              <span class="order-header-label">Order ID</span>
              <span class="order-header-value mono" id="orderIdValue">-</span>
            </div>
            <div class="order-header-item">
              <span class="order-header-label">Customer ID</span>
              <span class="order-header-value mono" id="customerIdValue">-</span>
            </div>
            <div class="order-header-item">
              <span class="order-header-label">Status</span>
              <span id="orderStatusBadge"></span>
            </div>
            <div class="order-header-item">
              <span class="order-header-label">Created</span>
              <span class="order-header-value" id="createdAtValue">-</span>
            </div>
            <div class="order-header-item">
              <span class="order-header-label">Job Location</span>
              <span class="order-header-value mono" id="jobLocationValue">-</span>
            </div>
          </div>
        </div>

        <!-- Assignments Section -->
        <div class="section-title">
          Assignments
          <span class="section-title-count" id="assignmentCount">0</span>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
          <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <line x1="19" y1="8" x2="19" y2="14"/>
            <line x1="22" y1="11" x2="16" y2="11"/>
          </svg>
          <div class="empty-state-title">No Assignments</div>
          <p class="empty-state-hint">This order has no assignments yet.</p>
        </div>

        <!-- Assignments Table -->
        <div class="table-wrapper" id="tableWrapper">
          <table class="assignments-table" id="assignmentsTable">
            <thead>
              <tr>
                <th>Assignment ID</th>
                <th>Employee ID</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="assignmentsTableBody">
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function() {
      if (typeof window.__DATA__ === 'undefined') {
        return;
      }

      const data = window.__DATA__;

      // Check for error state
      if (data.error) {
        document.getElementById('placeholder').style.display = 'none';
        document.getElementById('errorState').style.display = 'block';
        if (data.errorMessage) {
          document.getElementById('errorMessage').textContent = data.errorMessage;
        }
        return;
      }

      // Hide placeholder, show content
      document.getElementById('placeholder').style.display = 'none';
      document.getElementById('content').style.display = 'block';

      // Populate order header
      const order = data.order || {};
      document.getElementById('orderIdValue').textContent = order.id || '-';
      document.getElementById('customerIdValue').textContent = order.customerId || '-';
      document.getElementById('createdAtValue').textContent = order.createdAt || '-';
      document.getElementById('jobLocationValue').textContent = order.jobLocationCode || '-';

      // Order status badge
      const orderStatusBadge = document.getElementById('orderStatusBadge');
      const orderStatus = order.status || 'UNKNOWN';
      const badge = document.createElement('span');
      badge.className = 'status-badge order-status-' + orderStatus.toLowerCase().replace(/_/g, '_');
      badge.textContent = orderStatus.replace(/_/g, ' ');
      orderStatusBadge.appendChild(badge);

      // Assignment count
      document.getElementById('assignmentCount').textContent = data.totalAssignments || 0;

      // Render assignments table
      const tableBody = document.getElementById('assignmentsTableBody');
      const tableWrapper = document.getElementById('tableWrapper');
      const emptyState = document.getElementById('emptyState');

      if (!data.assignments || data.assignments.length === 0) {
        tableWrapper.style.display = 'none';
        emptyState.style.display = 'block';
      } else {
        tableBody.innerHTML = '';
        data.assignments.forEach(function(item) {
          const row = document.createElement('tr');

          const idCell = document.createElement('td');
          idCell.className = 'id-cell';
          idCell.textContent = item.id || '-';
          idCell.title = item.id || '';

          const employeeCell = document.createElement('td');
          employeeCell.className = 'employee-cell';
          employeeCell.textContent = item.employeeId || '-';

          const startDateCell = document.createElement('td');
          startDateCell.className = 'date-cell';
          startDateCell.textContent = item.startDate || '-';

          const endDateCell = document.createElement('td');
          endDateCell.className = 'date-cell';
          endDateCell.textContent = item.endDate || '-';

          const statusCell = document.createElement('td');
          statusCell.className = 'status-cell';
          if (item.status) {
            const statusBadge = document.createElement('span');
            const statusClass = 'status-' + item.status.toLowerCase();
            statusBadge.className = 'status-badge ' + statusClass;
            statusBadge.textContent = item.status.replace(/_/g, ' ');
            statusCell.appendChild(statusBadge);
          } else {
            const statusBadge = document.createElement('span');
            statusBadge.className = 'status-badge status-default';
            statusBadge.textContent = 'N/A';
            statusCell.appendChild(statusBadge);
          }

          row.appendChild(idCell);
          row.appendChild(employeeCell);
          row.appendChild(startDateCell);
          row.appendChild(endDateCell);
          row.appendChild(statusCell);
          tableBody.appendChild(row);
        });
      }
    })();
  </script>
</body>
</html>

